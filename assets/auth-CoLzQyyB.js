import{Q as r}from"./index-DAd-KxhA.js";const s="http://localhost:4000";class n{getHeaders(e=!1){const t={"Content-Type":"application/json"};if(e){const o=localStorage.getItem(r);o&&(t.Authorization=`Bearer ${o}`)}return t}async login(e){const t=await fetch(`${s}/api/auth/login`,{method:"POST",headers:this.getHeaders(),body:JSON.stringify(e)});if(!t.ok)throw await t.json();const o=await t.json();return localStorage.setItem(r,o.token),o}async register(e){const t=await fetch(`${s}/api/auth/register`,{method:"POST",headers:this.getHeaders(),body:JSON.stringify(e)});if(!t.ok)throw await t.json();const o=await t.json();return localStorage.setItem(r,o.token),o}async getProfile(){const e=await fetch(`${s}/api/profile`,{headers:this.getHeaders(!0)});if(!e.ok)throw await e.json();return e.json()}async updateProfile(e){const t=await fetch(`${s}/api/profile`,{method:"PUT",headers:this.getHeaders(!0),body:JSON.stringify(e)});if(!t.ok)throw await t.json();return t.json()}async uploadAvatar(e){const t=new FormData;t.append("avatar",e);const o=localStorage.getItem(r),a=await fetch(`${s}/api/profile/avatar`,{method:"POST",headers:{Authorization:o?`Bearer ${o}`:""},body:t});if(!a.ok)throw await a.json();return a.json()}logout(){localStorage.removeItem(r)}isAuthenticated(){return!!localStorage.getItem(r)}}const l=new n;export{l as a};
