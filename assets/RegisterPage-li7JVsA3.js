import{d as y,x as N,u as V,O as k,i as E,h as S,P as O,c as u,o as c,b,a as s,e as o,t as a,m as x,l as p,p as v,v as A,z as f,f as R,w as C,_ as H}from"./index-DAd-KxhA.js";import{S as L,r as D}from"./auth-BafdylY0.js";import{a as $}from"./auth-CoLzQyyB.js";const P={class:"register-page"},B={class:"register-page__content"},G={class:"register-page__form-container"},M={class:"register-page__header"},z={class:"register-page__title"},j={class:"register-page__subtitle"},F={class:"register-form__field"},W={class:"register-form__label",for:"email"},X={key:0,class:"register-form__error"},q={class:"register-form__field"},J={class:"register-form__label",for:"password"},K={key:0,class:"register-form__error"},Q={class:"register-form__field"},Y={class:"register-form__label",for:"name"},Z={key:0,class:"register-form__error"},ee=["disabled"],se={key:0,class:"register-form__server-error"},te={class:"register-page__footer"},re={class:"register-page__footer-text"},oe=y({__name:"RegisterPage",setup(ae){const U=N(),{t,locale:T}=V(),h=k(),n=E({email:"",password:"",name:""}),r=E({}),d=S(!1),l=S("");function g(m){r[m]=void 0,l.value=""}async function w(){Object.keys(r).forEach(e=>{r[e]=void 0}),l.value="";const m=D.safeParse(n);if(!m.success){m.error.issues.forEach(e=>{const _=e.path[0];r[_]=e.message});return}d.value=!0;try{const e=await $.register(n);h.setToken(e.token),h.setUser(e.user),U.push(`/${T.value}/profile`)}catch(e){if(Array.isArray(e==null?void 0:e.issues)&&e.issues.length){e.issues.forEach(_=>{var I;const i=(I=_.path)==null?void 0:I[0];i&&(r[i]=_.message)});return}(e==null?void 0:e.message)==="User already exists"?l.value=t("VALIDATION.USER_EXISTS"):l.value=t("VALIDATION.SERVER_ERROR")}finally{d.value=!1}}return(m,e)=>{const _=O("RouterLink");return c(),u("div",P,[b(o(L)),s("div",B,[s("div",G,[s("div",M,[s("h1",z,a(o(t)("AUTH.REGISTER_TITLE")),1),s("p",j,a(o(t)("AUTH.REGISTER_SUBTITLE")),1)]),s("form",{class:"register-form",onSubmit:x(w,["prevent"]),novalidate:""},[s("div",F,[s("label",W,a(o(t)("AUTH.EMAIL")),1),v(s("input",{id:"email","onUpdate:modelValue":e[0]||(e[0]=i=>n.email=i),type:"email",class:f(["register-form__input",{"register-form__input_error":r.email}]),autocomplete:"email",onInput:e[1]||(e[1]=i=>g("email"))},null,34),[[A,n.email]]),r.email?(c(),u("span",X,a(o(t)(`VALIDATION.${r.email}`)),1)):p("",!0)]),s("div",q,[s("label",J,a(o(t)("AUTH.PASSWORD")),1),v(s("input",{id:"password","onUpdate:modelValue":e[2]||(e[2]=i=>n.password=i),type:"password",class:f(["register-form__input",{"register-form__input_error":r.password}]),autocomplete:"new-password",onInput:e[3]||(e[3]=i=>g("password"))},null,34),[[A,n.password]]),r.password?(c(),u("span",K,a(o(t)(`VALIDATION.${r.password}`)),1)):p("",!0)]),s("div",Q,[s("label",Y,a(o(t)("AUTH.NAME")),1),v(s("input",{id:"name","onUpdate:modelValue":e[4]||(e[4]=i=>n.name=i),type:"text",class:f(["register-form__input",{"register-form__input_error":r.name}]),autocomplete:"name",onInput:e[5]||(e[5]=i=>g("name"))},null,34),[[A,n.name]]),r.name?(c(),u("span",Z,a(o(t)(`VALIDATION.${r.name}`)),1)):p("",!0)]),s("button",{type:"submit",class:f(["register-form__submit",{"register-form__submit_loading":d.value}]),disabled:d.value},a(d.value?o(t)("AUTH.CREATING_ACCOUNT"):o(t)("AUTH.REGISTER_BUTTON")),11,ee),l.value?(c(),u("div",se,a(l.value),1)):p("",!0)],32),s("div",te,[s("p",re,[R(a(o(t)("AUTH.HAS_ACCOUNT"))+" ",1),b(_,{to:`/${o(T)}/login`,class:"register-page__link"},{default:C(()=>[R(a(o(t)("AUTH.SIGN_IN")),1)]),_:1},8,["to"])])])])])])}}}),_e=H(oe,[["__scopeId","data-v-959bfc6b"]]);export{_e as default};
